<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gov Chat - Government Assistant</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Arial', sans-serif;
    }
    
    body {
      background-color: #f5f5f5;
      overflow: hidden;
    }
    
    .container {
      display: flex;
      height: 100vh;
      transition: all 0.3s ease;
    }
    
    .chat-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      background-color: white;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      position: relative;
      transition: all 0.3s ease;
    }
    
    .chat-header {
      background: linear-gradient(135deg, #1e3a8a 0%, #2c5282 100%);
      color: white;
      padding: 15px 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .chat-header h2 {
      font-size: 1.4rem;
      font-weight: 600;
      letter-spacing: 0.5px;
      text-transform: uppercase;
    }
    
    .chat-header img {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      object-fit: cover;
      border: 2px solid rgba(255, 255, 255, 0.2);
      filter: brightness(0) invert(1);
    }
    
    .chat-messages {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }
    
    .message {
      margin-bottom: 15px;
      display: flex;
      flex-direction: column;
    }
    
    .user-message {
      align-items: flex-end;
    }
    
    .bot-message {
      align-items: flex-start;
    }
    
    .message-content {
      padding: 10px 15px;
      border-radius: 18px;
      max-width: 80%;
      word-wrap: break-word;
    }
    
    .user-message .message-content {
      background-color: #1e3a8a;
      color: white;
    }
    
    .bot-message .message-content {
      background-color: #e9ecef;
      color: #212529;
    }
    
    .typing-indicator {
      display: none;
      align-items: flex-start;
      margin-bottom: 15px;
    }
    
    .typing-indicator .message-content {
      background-color: #e9ecef;
      padding: 12px 15px;
      border-radius: 18px;
    }
    
    .dot {
      display: inline-block;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: #adb5bd;
      animation: wave 1.3s linear infinite;
      margin-right: 3px;
    }
    
    .dot:nth-child(2) {
      animation-delay: -1.1s;
    }
    
    .dot:nth-child(3) {
      animation-delay: -0.9s;
    }
    
    @keyframes wave {
      0%, 60%, 100% {
        transform: translateY(0);
      }
      30% {
        transform: translateY(-5px);
      }
    }
    
    .chat-input {
      display: flex;
      padding: 15px;
      border-top: 1px solid #e9ecef;
      background-color: white;
    }
    
    .chat-input input {
      flex: 1;
      padding: 12px 15px;
      border: 1px solid #ced4da;
      border-radius: 20px;
      outline: none;
      font-size: 1rem;
    }
    
    .chat-input input:focus {
      border-color: #1e3a8a;
    }
    
    .send-button {
      background-color: #1e3a8a;
      color: white;
      border: none;
      border-radius: 50%;
      width: 44px;
      height: 44px;
      margin-left: 10px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s;
    }
    
    .send-button:hover {
      background-color: #152b5e;
    }
    
    .form-container {
      width: 0;
      background-color: #f8f9fa;
      overflow: hidden;
      transition: width 0.3s ease;
      border-left: 1px solid #dee2e6;
    }
    
    .form-container.active {
      width: 450px;
    }
    
    .form-header {
      background-color: #1e3a8a;
      color: white;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .form-header h2 {
      font-size: 1.2rem;
    }
    
    .close-form {
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
    }
    
    .form-content {
      padding: 20px;
      overflow-y: auto;
      height: calc(100vh - 56px);
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      color: #495057;
    }
    
    .form-control {
      width: 100%;
      padding: 10px;
      border: 1px solid #ced4da;
      border-radius: 4px;
      font-size: 1rem;
    }
    
    .form-control:focus {
      border-color: #1e3a8a;
      outline: none;
    }
    
    .form-section {
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 1px solid #dee2e6;
    }
    
    .form-section h3 {
      margin-bottom: 15px;
      color: #1e3a8a;
    }
    
    .form-row {
      display: flex;
      margin: 0 -10px;
    }
    
    .form-col {
      flex: 1;
      padding: 0 10px;
    }
    
    .submit-btn {
      background-color: #1e3a8a;
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 4px;
      font-size: 1rem;
      cursor: pointer;
      width: 100%;
      margin-top: 15px;
      transition: background-color 0.2s;
    }
    
    .submit-btn:hover {
      background-color: #152b5e;
    }
    
    @media (max-width: 768px) {
      .container.form-active .chat-container {
        display: none;
      }
      
      .form-container.active {
        width: 100%;
      }
    }
    
    .official-seal {
      display: flex;
      justify-content: center;
      margin: 20px 0;
    }
    
    .official-seal img {
      width: 120px;
      height: 120px;
    }
    
    .form-disclaimer {
      font-size: 0.8rem;
      color: #6c757d;
      margin-top: 25px;
      text-align: center;
    }

    /* Form submission animation styles */
    @keyframes formSubmit {
      0% {
        transform: scale(1);
        opacity: 1;
      }
      50% {
        transform: scale(0.95);
        opacity: 0.8;
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    @keyframes fieldFill {
      0% {
        background-color: #e6f7ff;
      }
      100% {
        background-color: transparent;
      }
    }

    .form-submitting {
      animation: formSubmit 0.5s ease-in-out;
    }

    .field-filled {
      animation: fieldFill 1s ease-in-out;
    }

    .success-message {
      background-color: #d4edda;
      color: #155724;
      padding: 15px;
      border-radius: 4px;
      margin: 20px 0;
      text-align: center;
      animation: fadeIn 0.5s ease-in-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>
<body>
  <div class="container" id="container">
    <div class="chat-container">
      <div class="chat-header">
        <img src="lol.png" alt="Gov Chat Logo" />
        <h2>Gov Chat</h2>
      </div>
      <div class="chat-messages" id="chat-messages">
        <div class="message bot-message">
          <div class="message-content">
            Hello! I'm your Government Assistant. How can I help you today?
          </div>
        </div>
      </div>
      <div class="typing-indicator" id="typing-indicator">
        <div class="message-content">
          <span class="dot"></span>
          <span class="dot"></span>
          <span class="dot"></span>
        </div>
      </div>
      <div class="chat-input">
        <input type="text" id="user-input" placeholder="Type your message here..." />
        <button class="send-button" id="send-button">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M22 2L11 13" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    </div>
    <div class="form-container" id="form-container">
      <div class="form-header">
        <h2 id="form-title">DMV Change of Address Form</h2>
        <button class="close-form" id="close-form">&times;</button>
      </div>
      <div class="form-content">
        <div class="official-seal">
          <img src="lollol.png" alt="Gov Chat Logo" style="width: 120px; height: 120px;" />
        </div>
        <form id="dmv-form">
          <div class="form-section">
            <h3>Personal Information</h3>
            <div class="form-group">
              <label for="full-name">Full Name</label>
              <input type="text" class="form-control" id="full-name" placeholder="Enter your full name">
            </div>
            <div class="form-row">
              <div class="form-col">
                <div class="form-group">
                  <label for="date-of-birth">Date of Birth</label>
                  <input type="date" class="form-control" id="date-of-birth">
                </div>
              </div>
              <div class="form-col">
                <div class="form-group">
                  <label for="driver-license">Driver's License Number</label>
                  <input type="text" class="form-control" id="driver-license" placeholder="Enter license number">
                </div>
              </div>
            </div>
          </div>
          
          <div class="form-section">
            <h3>Previous Address</h3>
            <div class="form-group">
              <label for="prev-street">Street Address</label>
              <input type="text" class="form-control" id="prev-street" placeholder="Enter street address">
            </div>
            <div class="form-row">
              <div class="form-col">
                <div class="form-group">
                  <label for="prev-city">City</label>
                  <input type="text" class="form-control" id="prev-city" placeholder="Enter city">
                </div>
              </div>
              <div class="form-col">
                <div class="form-group">
                  <label for="prev-state">State</label>
                  <input type="text" class="form-control" id="prev-state" placeholder="Enter state">
                </div>
              </div>
            </div>
            <div class="form-row">
              <div class="form-col">
                <div class="form-group">
                  <label for="prev-zip">ZIP Code</label>
                  <input type="text" class="form-control" id="prev-zip" placeholder="Enter ZIP code">
                </div>
              </div>
              <div class="form-col">
                <div class="form-group">
                  <label for="prev-county">County</label>
                  <input type="text" class="form-control" id="prev-county" placeholder="Enter county">
                </div>
              </div>
            </div>
          </div>
          
          <div class="form-section">
            <h3>New Address</h3>
            <div class="form-group">
              <label for="new-street">Street Address</label>
              <input type="text" class="form-control" id="new-street" placeholder="Enter street address">
            </div>
            <div class="form-row">
              <div class="form-col">
                <div class="form-group">
                  <label for="new-city">City</label>
                  <input type="text" class="form-control" id="new-city" placeholder="Enter city">
                </div>
              </div>
              <div class="form-col">
                <div class="form-group">
                  <label for="new-state">State</label>
                  <input type="text" class="form-control" id="new-state" placeholder="Enter state">
                </div>
              </div>
            </div>
            <div class="form-row">
              <div class="form-col">
                <div class="form-group">
                  <label for="new-zip">ZIP Code</label>
                  <input type="text" class="form-control" id="new-zip" placeholder="Enter ZIP code">
                </div>
              </div>
              <div class="form-col">
                <div class="form-group">
                  <label for="new-county">County</label>
                  <input type="text" class="form-control" id="new-county" placeholder="Enter county">
                </div>
              </div>
            </div>
          </div>
          
          <div class="form-section">
            <h3>Vehicle Information</h3>
            <div class="form-row">
              <div class="form-col">
                <div class="form-group">
                  <label for="vehicle-make">Make</label>
                  <input type="text" class="form-control" id="vehicle-make" placeholder="Enter vehicle make">
                </div>
              </div>
              <div class="form-col">
                <div class="form-group">
                  <label for="vehicle-model">Model</label>
                  <input type="text" class="form-control" id="vehicle-model" placeholder="Enter vehicle model">
                </div>
              </div>
            </div>
            <div class="form-row">
              <div class="form-col">
                <div class="form-group">
                  <label for="vehicle-year">Year</label>
                  <input type="text" class="form-control" id="vehicle-year" placeholder="Enter vehicle year">
                </div>
              </div>
              <div class="form-col">
                <div class="form-group">
                  <label for="license-plate">License Plate Number</label>
                  <input type="text" class="form-control" id="license-plate" placeholder="Enter license plate">
                </div>
              </div>
            </div>
          </div>
          
          <div class="form-section">
            <h3>Contact Information</h3>
            <div class="form-row">
              <div class="form-col">
                <div class="form-group">
                  <label for="email">Email Address</label>
                  <input type="email" class="form-control" id="email" placeholder="Enter email address">
                </div>
              </div>
              <div class="form-col">
                <div class="form-group">
                  <label for="phone">Phone Number</label>
                  <input type="tel" class="form-control" id="phone" placeholder="Enter phone number">
                </div>
              </div>
            </div>
          </div>
          
          <button type="submit" class="submit-btn">Submit Change of Address</button>
          
          <p class="form-disclaimer">
            This is a demonstration form for a government hackathon. In a real application, sensitive information would be securely transmitted using encryption.
          </p>
        </form>
      </div>
    </div>

    <!-- New Car Registration Form -->
    <div class="form-container" id="car-form-container">
      <div class="form-header">
        <h2>New Vehicle Registration Form</h2>
        <button class="close-form" id="close-car-form">&times;</button>
      </div>
      <div class="form-content">
        <div class="official-seal">
          <img src="lollol.png" alt="Gov Chat Logo" style="width: 120px; height: 120px;" />
        </div>
        <form id="car-registration-form">
          <div class="form-section">
            <h3>Personal Information</h3>
            <div class="form-group">
              <label for="car-full-name">Full Name</label>
              <input type="text" class="form-control" id="car-full-name" placeholder="Enter your full name">
            </div>
            <div class="form-row">
              <div class="form-col">
                <div class="form-group">
                  <label for="car-dob">Date of Birth</label>
                  <input type="date" class="form-control" id="car-dob">
                </div>
              </div>
              <div class="form-col">
                <div class="form-group">
                  <label for="car-license">Driver's License Number</label>
                  <input type="text" class="form-control" id="car-license" placeholder="Enter license number">
                </div>
              </div>
            </div>
          </div>

          <div class="form-section">
            <h3>Vehicle Information</h3>
            <div class="form-row">
              <div class="form-col">
                <div class="form-group">
                  <label for="car-make">Make</label>
                  <input type="text" class="form-control" id="car-make" placeholder="Enter vehicle make">
                </div>
              </div>
              <div class="form-col">
                <div class="form-group">
                  <label for="car-model">Model</label>
                  <input type="text" class="form-control" id="car-model" placeholder="Enter vehicle model">
                </div>
              </div>
            </div>
            <div class="form-row">
              <div class="form-col">
                <div class="form-group">
                  <label for="car-year">Year</label>
                  <input type="text" class="form-control" id="car-year" placeholder="Enter vehicle year">
                </div>
              </div>
              <div class="form-col">
                <div class="form-group">
                  <label for="car-vin">VIN Number</label>
                  <input type="text" class="form-control" id="car-vin" placeholder="Enter VIN number">
                </div>
              </div>
            </div>
            <div class="form-group">
              <label for="car-color">Color</label>
              <input type="text" class="form-control" id="car-color" placeholder="Enter vehicle color">
            </div>
          </div>

          <div class="form-section">
            <h3>Purchase Information</h3>
            <div class="form-row">
              <div class="form-col">
                <div class="form-group">
                  <label for="purchase-date">Purchase Date</label>
                  <input type="date" class="form-control" id="purchase-date">
                </div>
              </div>
              <div class="form-col">
                <div class="form-group">
                  <label for="purchase-price">Purchase Price</label>
                  <input type="number" class="form-control" id="purchase-price" placeholder="Enter purchase price">
                </div>
              </div>
            </div>
            <div class="form-group">
              <label for="dealer-name">Dealer Name</label>
              <input type="text" class="form-control" id="dealer-name" placeholder="Enter dealer name">
            </div>
          </div>

          <div class="form-section">
            <h3>Contact Information</h3>
            <div class="form-row">
              <div class="form-col">
                <div class="form-group">
                  <label for="car-email">Email Address</label>
                  <input type="email" class="form-control" id="car-email" placeholder="Enter email address">
                </div>
              </div>
              <div class="form-col">
                <div class="form-group">
                  <label for="car-phone">Phone Number</label>
                  <input type="tel" class="form-control" id="car-phone" placeholder="Enter phone number">
                </div>
              </div>
            </div>
          </div>

          <button type="submit" class="submit-btn">Submit Vehicle Registration</button>

          <p class="form-disclaimer">
            This is a demonstration form for a government hackathon. In a real application, sensitive information would be securely transmitted using encryption.
          </p>
        </form>
      </div>
    </div>
  </div>

  <script>
    // Constants and DOM Elements
    const TRIGGER_PHRASE = "i just moved what should i do";
    const CAR_TRIGGER_PHRASE = "i just bought a car";
    const API_KEY = "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";
    
    const container = document.getElementById('container');
    const formContainer = document.getElementById('form-container');
    const carFormContainer = document.getElementById('car-form-container');
    const chatMessages = document.getElementById('chat-messages');
    const userInput = document.getElementById('user-input');
    const sendButton = document.getElementById('send-button');
    const closeFormButton = document.getElementById('close-form');
    const closeCarFormButton = document.getElementById('close-car-form');
    const typingIndicator = document.getElementById('typing-indicator');
    const dmvForm = document.getElementById('dmv-form');
    const carRegistrationForm = document.getElementById('car-registration-form');
    
    // Event Listeners
    sendButton.addEventListener('click', handleUserMessage);
    userInput.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        handleUserMessage();
      }
    });
    
    closeFormButton.addEventListener('click', () => closeForm('address'));
    closeCarFormButton.addEventListener('click', () => closeForm('car'));
    
    // Form submission handlers
    dmvForm.addEventListener('submit', handleFormSubmission);
    carRegistrationForm.addEventListener('submit', handleCarFormSubmission);

    // Initialize the chatbot with some pre-loaded responses
    const responses = {
      greeting: [
        "Hello! How can I assist you with government services today?",
        "Hi there! I'm your government assistant. What can I help you with?",
        "Welcome! I'm here to help with any government-related questions."
      ],
      
      moveResponses: [
        "I see you've recently moved. I can help you update your address with the DMV. Let me open the Change of Address form for you.",
        "When you move, you need to update your address with the DMV. I've opened the form for you to fill out.",
        "Moving requires updating your address with the DMV. I've opened the form for you - let me know if you need help filling it out."
      ],

      carResponses: [
        "I see you've purchased a new car. I can help you register it with the DMV. Let me open the Vehicle Registration form for you.",
        "Congratulations on your new car! You'll need to register it with the DMV. I've opened the form for you.",
        "New car purchases require DMV registration. I've opened the form for you - let me know if you need help filling it out."
      ],
      
      formHelp: [
        "In the 'Personal Information' section, please enter your full legal name as it appears on your ID.",
        "For the 'Driver's License Number', you can find this on your current license card.",
        "Make sure to enter your complete previous address including the county.",
        "Your new address should include apartment or unit number if applicable.",
        "For vehicle information, enter details exactly as they appear on your registration.",
        "The email address you provide will be used to send your confirmation."
      ],
      
      fallback: [
        "I'm not sure I understand. Could you rephrase that?",
        "I'm still learning. Could you try asking in a different way?",
        "I don't have information about that. Is there something else I can help with?",
        "I'm designed to help with government services. Could you clarify what you need help with?"
      ]
    };

    // Function to handle form submissions
    function handleFormSubmission(e) {
      e.preventDefault();
      const form = e.target;
      const formData = new FormData(form);
      const formDataObj = {};
      
      // Add submitting animation to form
      form.classList.add('form-submitting');
      
      // Animate each field being filled
      const fields = form.querySelectorAll('input');
      fields.forEach((field, index) => {
        setTimeout(() => {
          field.classList.add('field-filled');
          setTimeout(() => {
            field.classList.remove('field-filled');
          }, 1000);
        }, index * 100);
      });
      
      for (let [key, value] of formData.entries()) {
        formDataObj[key] = value;
      }
      
      // Add success message
      const successMessage = document.createElement('div');
      successMessage.className = 'success-message';
      successMessage.textContent = 'Thank you so much for filling out the form!';
      form.insertBefore(successMessage, form.firstChild);
      
      // Add bot message after a delay
      setTimeout(() => {
        addBotMessage("Thank you so much for filling out the form! Is there anything else you need help with?");
      }, 1500);
      
      console.log("Form data:", formDataObj);
      
      // Reset form and remove animations after delay
      setTimeout(() => {
        form.reset();
        form.classList.remove('form-submitting');
        successMessage.remove();
        closeForm('address');
      }, 2000);
    }

    function handleCarFormSubmission(e) {
      e.preventDefault();
      const form = e.target;
      const formData = new FormData(form);
      const formDataObj = {};
      
      // Add submitting animation to form
      form.classList.add('form-submitting');
      
      // Animate each field being filled
      const fields = form.querySelectorAll('input');
      fields.forEach((field, index) => {
        setTimeout(() => {
          field.classList.add('field-filled');
          setTimeout(() => {
            field.classList.remove('field-filled');
          }, 1000);
        }, index * 100);
      });
      
      for (let [key, value] of formData.entries()) {
        formDataObj[key] = value;
      }
      
      // Add success message
      const successMessage = document.createElement('div');
      successMessage.className = 'success-message';
      successMessage.textContent = 'Thank you so much for filling out the form!';
      form.insertBefore(successMessage, form.firstChild);
      
      // Add bot message after a delay
      setTimeout(() => {
        addBotMessage("Thank you so much for filling out the form! Is there anything else you need help with?");
      }, 1500);
      
      console.log("Car registration data:", formDataObj);
      
      // Reset form and remove animations after delay
      setTimeout(() => {
        form.reset();
        form.classList.remove('form-submitting');
        successMessage.remove();
        closeForm('car');
      }, 2000);
    }
    
    // Function to handle user message
    function handleUserMessage() {
      const message = userInput.value.trim();
      
      if (message === '') return;
      
      addUserMessage(message);
      userInput.value = '';
      showTypingIndicator();
      
      if (message.toLowerCase().includes(TRIGGER_PHRASE)) {
        setTimeout(() => {
          const randomResponse = responses.moveResponses[Math.floor(Math.random() * responses.moveResponses.length)];
          addBotMessage(randomResponse);
          openForm('address');
          setTimeout(() => {
            addBotMessage("I'll help you complete this form. Let me know if you have any questions about specific fields.");
          }, 1000);
        }, 1500);
      } else if (message.toLowerCase().includes(CAR_TRIGGER_PHRASE)) {
        setTimeout(() => {
          const randomResponse = responses.carResponses[Math.floor(Math.random() * responses.carResponses.length)];
          addBotMessage(randomResponse);
          openForm('car');
          setTimeout(() => {
            addBotMessage("I'll help you complete this form. Let me know if you have any questions about specific fields.");
          }, 1000);
        }, 1500);
      } else {
        processWithAI(message);
      }
    }

    // Function to open form
    function openForm(type) {
      if (type === 'address') {
        formContainer.classList.add('active');
        carFormContainer.classList.remove('active');
      } else if (type === 'car') {
        carFormContainer.classList.add('active');
        formContainer.classList.remove('active');
      }
      container.classList.add('form-active');
    }
    
    // Function to close form
    function closeForm(type) {
      if (type === 'address') {
        formContainer.classList.remove('active');
      } else if (type === 'car') {
        carFormContainer.classList.remove('active');
      }
      container.classList.remove('form-active');
    }

    // Function to show typing indicator
    function showTypingIndicator() {
      typingIndicator.style.display = 'flex';
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // Function to add user message to chat
    function addUserMessage(message) {
      const messageDiv = document.createElement('div');
      messageDiv.classList.add('message', 'user-message');
      
      const messageContent = document.createElement('div');
      messageContent.classList.add('message-content');
      messageContent.textContent = message;
      
      messageDiv.appendChild(messageContent);
      chatMessages.appendChild(messageDiv);
      
      // Scroll to bottom
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // Function to add bot message to chat
    function addBotMessage(message) {
      // Hide typing indicator
      typingIndicator.style.display = 'none';
      
      const messageDiv = document.createElement('div');
      messageDiv.classList.add('message', 'bot-message');
      
      const messageContent = document.createElement('div');
      messageContent.classList.add('message-content');
      messageContent.textContent = message;
      
      messageDiv.appendChild(messageContent);
      chatMessages.appendChild(messageDiv);
      
      // Scroll to bottom
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // Function to process message with AI (simulated)
    function processWithAI(message) {
      setTimeout(() => {
        if (message.toLowerCase().includes('hello') || message.toLowerCase().includes('hi')) {
          const randomGreeting = responses.greeting[Math.floor(Math.random() * responses.greeting.length)];
          addBotMessage(randomGreeting);
        } 
        else if (message.toLowerCase().includes('form') || message.toLowerCase().includes('help with form')) {
          const randomHelp = responses.formHelp[Math.floor(Math.random() * responses.formHelp.length)];
          addBotMessage(randomHelp);
        }
        else if (message.toLowerCase().includes('move') || message.toLowerCase().includes('moving') || message.toLowerCase().includes('new address')) {
          const randomResponse = responses.moveResponses[Math.floor(Math.random() * responses.moveResponses.length)];
          addBotMessage(randomResponse);
          openForm('address');
        }
        else if (message.toLowerCase().includes('car') || message.toLowerCase().includes('vehicle') || message.toLowerCase().includes('registration')) {
          const randomResponse = responses.carResponses[Math.floor(Math.random() * responses.carResponses.length)];
          addBotMessage(randomResponse);
          openForm('car');
        }
        else {
          const randomFallback = responses.fallback[Math.floor(Math.random() * responses.fallback.length)];
          addBotMessage(randomFallback);
        }
      }, 1500);
    }

    // Helper function to assist with form filling
    function suggestFormField(field, value) {
      const fieldElement = document.getElementById(field);
      if (fieldElement) {
        fieldElement.value = value;
        fieldElement.classList.add('highlighted');
        setTimeout(() => {
          fieldElement.classList.remove('highlighted');
        }, 2000);
      }
    }

    // Add initial styles for field highlighting
    const style = document.createElement('style');
    style.textContent = `
      .highlighted {
        background-color: #e6f7ff;
        border-color: #1e3a8a !important;
        transition: background-color 0.5s ease;
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>